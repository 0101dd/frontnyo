(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"12f9":function(t,e,r){"use strict";r("72e5")},"154d":function(t,e,r){},"1c9f":function(t,e,r){"use strict";r("42b6")},"42b6":function(t,e,r){},"54a3":function(t,e,r){},"54b8":function(t,e,r){"use strict";r("54a3")},7277:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{attrs:{id:"inspire"}},[r("div",{attrs:{id:"router-link"}}),r("v-navigation-drawer",{attrs:{app:"",color:"secondary"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[r("v-list",{staticClass:"text-center mt-16",staticStyle:{color:"var(--info)"},attrs:{rounded:"",flat:""}},[r("v-list-item",{attrs:{"router-link":"",to:"/dashboard/users",ripple:!1}},[r("v-list-item-title",{staticClass:"pro"},[t._v("會員主頁")])],1),r("v-list-item",{attrs:{"router-link":"",to:"/dashboard/cart",ripple:!1}},[r("v-list-item-title",[t._v("購物清單")])],1),r("v-list-item",{attrs:{"router-link":"",to:"/dashboard/order",ripple:!1}},[r("v-list-item-title",[t._v("訂單查詢")])],1),r("v-list-item",{attrs:{"router-link":"",to:"/dashboard/userWorks",ripple:!1}},[r("v-list-item-title",[t._v("作品管理")])],1)],1)],1),r("v-main",[r("vue-page-transition",[r("router-view")],1)],1)],1)},s=[],i={data:function(){return{drawer:null}}},n=i,o=(r("1c9f"),r("2877")),c=r("6544"),l=r.n(c),u=r("7496"),d=r("8860"),m=r("da13"),p=r("5d23"),v=r("f6c4"),f=r("f774"),h=Object(o["a"])(n,a,s,!1,null,"45a0e3d7",null);e["default"]=h.exports;l()(h,{VApp:u["a"],VList:d["a"],VListItem:m["a"],VListItemTitle:p["b"],VMain:v["a"],VNavigationDrawer:f["a"]})},"72e5":function(t,e,r){},"855c":function(t,e,r){"use strict";r("f3cb")},b789:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"cart"}},[r("h1",{staticClass:"text-center"},[t._v("購物清單")]),r("router-link",{attrs:{to:"/dashboard/users"}},[t._v("會員主頁")]),r("router-link",{attrs:{to:"/dashboard/cart"}},[t._v("購物清單")]),r("router-link",{attrs:{to:"/dashboard/order"}},[t._v("訂單查詢")]),r("router-link",{attrs:{to:"/dashboard/userWorks"}},[t._v("作品管理")]),r("div",{staticClass:"container"},[r("v-data-table",{ref:"table",staticClass:"elevation-3",attrs:{headers:t.headers,items:t.products,"items-per-page":5},scopedSlots:t._u([{key:"item.product.image",fn:function(t){var e=t.item;return[r("img",{staticStyle:{width:"100px","vertical-align":"middle",padding:"5px 0"},attrs:{src:e.product.image}})]}}])})],1),r("v-btn",{staticClass:"mx-2 go-cart",staticStyle:{bottom:"50px",right:"250px",height:"50px",width:"100px","font-size":"1.3rem","font-weight":"bold",color:"var(--accent)"},attrs:{absolute:"",ripple:!1,disabled:0===t.products.length,color:"primary"},on:{click:t.checkout}},[t._v(" 結帳 ")])],1)},s=[],i=r("1da1"),n=(r("96cf"),{data:function(){return{products:[],headers:[{text:"商品圖片",align:"center",value:"product.image",class:"primary white--text subtitle-1"},{text:"名稱",align:"center",value:"product.name",class:"primary white--text subtitle-1"},{text:"數量",align:"center",value:"quantity",class:"primary white--text subtitle-1"}]}},methods:{checkout:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.post("/orders",{},{headers:{authorization:"Bearer "+t.user.token}});case 3:t.$router.push("/dashboard/order"),t.$store.commit("user/updateCart",0),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.$swal({icon:"error",title:"失敗",text:"結帳失敗"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/users/me/cart",{headers:{authorization:"Bearer "+t.user.token}});case 3:r=e.sent,a=r.data,t.products=a.result,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$swal({icon:"error",title:"失敗",text:"取得購物車失敗"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}),o=n,c=(r("12f9"),r("2877")),l=r("6544"),u=r.n(l),d=r("8336"),m=r("8fea"),p=Object(c["a"])(o,a,s,!1,null,"0cd8441a",null);e["default"]=p.exports;u()(p,{VBtn:d["a"],VDataTable:m["a"]})},ca6a:function(t,e,r){"use strict";r("154d")},cf2a:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"order"}},[r("h1",{staticClass:"text-center"},[t._v("訂單查詢")]),r("router-link",{attrs:{to:"/dashboard/users"}},[t._v("會員主頁")]),r("router-link",{attrs:{to:"/dashboard/cart"}},[t._v("購物清單")]),r("router-link",{attrs:{to:"/dashboard/order"}},[t._v("訂單查詢")]),r("router-link",{attrs:{to:"/dashboard/userWorks"}},[t._v("作品管理")]),r("div",{staticClass:"container"},[r("v-data-table",{ref:"table",staticClass:"elevation-3",attrs:{headers:t.headers,items:t.orders,"items-per-page":5},scopedSlots:t._u([{key:"item.date",fn:function(e){var r=e.item;return[t._v(" "+t._s(new Date(r.date).toLocaleString("zh-tw"))+" ")]}},{key:"item.products.product",fn:function(e){var a=e.item;return[r("ul",t._l(a.products[0],(function(e){return r("li",{key:"product"+e,staticClass:"product"},[t._v(" "+t._s(e.name)+" ")])})),0)]}},{key:"item.products.quantity",fn:function(e){var a=e.item;return[r("ul",t._l(a.products,(function(e){return r("li",{key:e},[t._v(" "+t._s(e.quantity)+" ")])})),0)]}}])})],1)],1)},s=[],i=r("1da1"),n=(r("96cf"),r("e9c4"),{data:function(){return{orders:[],headers:[{text:"日期",align:"center",value:"date",class:"primary white--text subtitle-1"},{text:"單號",align:"center",value:"products.0._id",class:"primary white--text subtitle-1"},{text:"名稱",align:"center",value:"products.product",class:"primary white--text subtitle-1"},{text:"數量",align:"center",value:"products.quantity",class:"primary white--text subtitle-1"}]}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/orders/me",{headers:{authorization:"Bearer "+t.user.token}});case 3:r=e.sent,a=r.data,t.orders=a.result,console.log("1"+JSON.stringify(t.orders)),console.log("2"+a),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.$swal({icon:"error",title:"失敗",text:"取得訂單失敗"});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}}),o=n,c=(r("855c"),r("2877")),l=r("6544"),u=r.n(l),d=r("8fea"),m=Object(c["a"])(o,a,s,!1,null,"f72b4a22",null);e["default"]=m.exports;u()(m,{VDataTable:d["a"]})},dc9b:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"user-works"}},[r("h1",{staticClass:"text-center"},[t._v("作品管理")]),r("router-link",{attrs:{to:"/dashboard/users"}},[t._v("會員主頁")]),r("router-link",{attrs:{to:"/dashboard/cart"}},[t._v("購物清單")]),r("router-link",{attrs:{to:"/dashboard/order"}},[t._v("訂單查詢")]),r("router-link",{attrs:{to:"/dashboard/userWorks"}},[t._v("作品管理")]),r("div",{staticClass:"container"},[r("v-data-table",{ref:"table",staticClass:"elevation-3",attrs:{headers:t.headers,items:t.works,"items-per-page":5},scopedSlots:t._u([{key:"item.image",fn:function(t){var e=t.item;return[r("img",{staticStyle:{width:"100px","vertical-align":"middle",padding:"5px 0"},attrs:{src:e.image}})]}},{key:"item.show",fn:function(e){var a=e.item;return[a.show?r("v-icon",{attrs:{color:"primary"}},[t._v(" mdi-check ")]):t._e(),a.show?t._e():r("v-icon",{attrs:{color:"error"}},[t._v(" mdi-close ")])]}},{key:"item.operate",fn:function(e){var a=e.item;return[r("v-icon",{staticClass:"mr-5",attrs:{middle:"",color:"primary"},on:{click:function(e){return t.editWork(a)}}},[t._v(" mdi-pencil ")]),r("v-icon",{attrs:{middle:"",color:"error"},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}])})],1),r("v-row",{attrs:{justify:"center"}},[r("v-dialog",{staticStyle:{background:"white"},attrs:{persistent:"","max-width":"650px",color:"white"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,s=e.attrs;return[r("v-btn",t._g(t._b({staticClass:"mx-2 plus",staticStyle:{background:"var(--primary)",bottom:"40px",right:"50px"},attrs:{fab:"",icon:"",large:"",absolute:"",ripple:!1,color:"accent"}},"v-btn",s,!1),a),[r("v-icon",[t._v(" mdi-plus ")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-card-text",[r("div",{staticClass:"container form-container",staticStyle:{display:"block",width:"500px",height:"650px"}},[r("v-card-title",[r("p",{staticClass:"text-h5 mt-6 mx-auto font-weight-black"})]),r("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.created.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("img-inputer",{attrs:{theme:"light",size:"large","bottom-text":"點選或拖拽圖片以修改","hover-text":"點選或拖拽圖片以修改",placeholder:"點選或拖拽選擇圖片","max-size":1024,"exceed-size-text":"檔案大小不能超過"},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}}),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("v-text-field",{attrs:{rule:t.state.name,label:"作品標題"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)]),r("v-textarea",{attrs:{label:"介紹",counter:"",maxlength:"200","full-width":"","single-line":"",required:"",rows:"3","row-height":"25"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),r("v-radio-group",{attrs:{row:""},model:{value:t.form.show,callback:function(e){t.$set(t.form,"show",e)},expression:"form.show"}},[r("v-radio",{attrs:{label:"發佈",value:!0}}),r("v-radio",{attrs:{label:"草稿",value:!1}})],1)],1)],1)]),r("v-card-actions",[r("v-spacer"),r("v-btn",{staticClass:"mb-5",attrs:{color:"primary",ripple:!1,bottom:""},on:{click:t.close}},[t._v(" 關閉 ")]),r("v-btn",{staticClass:"mb-5 mr-5",attrs:{color:"secondary",ripple:!1,type:"submit"},on:{click:t.submitModal}},[t._v(" 確定 ")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"400px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[r("v-card",{staticClass:"delete-card"},[r("v-card-text",{staticClass:"delete-title"},[t._v(" 確定要刪除作品嗎？ ")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{staticStyle:{right:"210px"},attrs:{color:"primary",ripple:!1,absolute:"",bottom:""},on:{click:t.closeDelete}},[t._v(" 取消 ")]),r("v-btn",{staticStyle:{right:"120px"},attrs:{color:"error",ripple:!1,absolute:"",bottom:""},on:{click:t.deleteWorks}},[t._v(" 刪除 ")]),r("v-spacer")],1)],1)],1)],1)],1)},s=[],i=r("1da1"),n=(r("96cf"),r("b0c0"),r("a434"),{data:function(){return{dialog:!1,dialogDelete:!1,valid:!0,editedIndex:-1,works:[],form:{name:"",image:null,description:"",show:!1,_id:"",index:-1},headers:[{text:"作品圖片",align:"center",sortable:!1,value:"image",class:"primary white--text subtitle-1"},{text:"標題",align:"center",sortable:!1,value:"name",class:"primary white--text subtitle-1"},{text:"介紹",align:"center",sortable:!1,value:"description",class:"primary white--text subtitle-1",width:"280px"},{text:"顯示",align:"center",class:"primary white--text subtitle-1",value:"show"},{text:"操作",align:"center",class:"primary white--text subtitle-1",value:"operate",sortable:!1}]}},computed:{state:function(){return{name:0!==this.form.name.length||null}}},methods:{close:function(){this.dialog=!1,this.form={name:"",image:null,description:"",show:!1,_id:"",index:-1}},editWork:function(t){this.form=Object.assign({},t),this.form.index=this.works.indexOf(t),this.dialog=!0},deleteItem:function(t){this.form=Object.assign({},t),this.form.index=this.works.indexOf(t),this.dialogDelete=!0},closeDelete:function(){this.dialogDelete=!1,this.form={name:"",image:null,description:"",show:!1,_id:"",index:-1}},submitModal:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,s,i,n,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.state.name){e.next=3;break}return t.$swal({icon:"error",iconColor:"#7e2f28",title:"缺少必填欄位",buttonsStyling:!1,background:"#DED7B9",confirmButtonText:"關閉",width:"20rem"}),e.abrupt("return");case 3:for(a in r=new FormData,t.form)"_id"!==a&&r.append(a,t.form[a]);if(e.prev=5,0!==t.form._id.length){e.next=15;break}return e.next=9,t.api.post("/userworks",r,{headers:{authorization:"Bearer "+t.user.token}});case 9:s=e.sent,i=s.data,t.works.push(i.result),t.dialog=!0,e.next=23;break;case 15:return e.next=17,t.api.patch("/userworks/"+t.form._id,r,{headers:{authorization:"Bearer "+t.user.token}});case 17:n=e.sent,o=n.data,console.log(o),c=t.form,o.result.image&&(c.image=o.result.image),t.works.splice(t.form.index,1,c);case 23:t.dialog=!1,e.next=29;break;case 26:e.prev=26,e.t0=e["catch"](5),e.t0.response?t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message}):t.$swal({icon:"error",title:"錯誤",text:"gg"});case 29:case"end":return e.stop()}}),e,null,[[5,26]])})))()},deleteWorks:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a in r=new FormData,t.form)"_id"!==a&&r.append(a,t.form[a]);return e.prev=2,e.next=5,t.api.patch("/userworks/deleteWorks/"+t.form._id,r,{headers:{authorization:"Bearer "+t.user.token}});case 5:s=e.sent,i=s.data,console.log(i),t.works.splice(t.form.index,1),t.closeDelete(),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](2),e.t0.response?t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message}):t.$swal({icon:"error",title:"錯誤",text:"錯誤"});case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))()}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/userworks/me",{headers:{authorization:"Bearer "+t.user.token}});case 3:r=e.sent,a=r.data,t.works=a.result,e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),e.t0.response&&t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message}),t.$swal({icon:"error",title:"錯誤",text:t.data.result});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}),o=n,c=(r("54b8"),r("2877")),l=r("6544"),u=r.n(l),d=r("8336"),m=r("b0af"),p=r("99d9"),v=r("8fea"),f=r("169a"),h=r("4bd4"),b=r("132d"),x=r("67b6"),g=r("43a6"),w=r("0fd9"),k=r("2fa4"),_=r("8654"),y=r("a844"),C=Object(c["a"])(o,a,s,!1,null,"4f04576e",null);e["default"]=C.exports;u()(C,{VBtn:d["a"],VCard:m["a"],VCardActions:p["a"],VCardText:p["b"],VCardTitle:p["c"],VDataTable:v["a"],VDialog:f["a"],VForm:h["a"],VIcon:b["a"],VRadio:x["a"],VRadioGroup:g["a"],VRow:w["a"],VSpacer:k["a"],VTextField:_["a"],VTextarea:y["a"]})},ed81:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"users-info"}},[r("h1",{staticClass:"text-center",staticStyle:{"font-family":"'HanyiSentyTang'"}},[t._v("會員主頁")]),r("router-link",{attrs:{to:"/dashboard/users"}},[t._v("會員主頁")]),r("router-link",{attrs:{to:"/dashboard/cart"}},[t._v("購物清單")]),r("router-link",{attrs:{to:"/dashboard/order"}},[t._v("訂單查詢")]),r("router-link",{attrs:{to:"/dashboard/userWorks"}},[t._v("作品管理")]),r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 col-sm-12 left-info"},[r("h1",{staticClass:"account-title"},[t._v("帳號：")]),r("h1",{staticClass:"pl-5"},[t._v(t._s(t.user.account))]),r("h1",{staticClass:"email-title"},[t._v("信箱：")]),r("h1",{staticClass:"pl-5"},[t._v(t._s(t.user.email))])])])])],1)},s=[],i=r("1da1"),n=(r("96cf"),{data:function(){return{valid:!0,users:[],editedIndex:-1,form:{nickName:"",age:"",phone:"",address:"",birthday:"",gender:!1,_id:"",index:-1}}},methods:{reset:function(){this.$refs.form.reset(),this.form={nickName:"",age:"",phone:"",address:"",birthday:"",gender:!1,_id:"",index:-1}},submitModal:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a in r=new FormData,t.form)"_id"!==a&&r.append(a,t.form[a]);return e.prev=2,e.next=5,t.api.patch("/users/"+t.form._id,r,{headers:{authorization:"Bearer "+t.user.token}});case 5:s=e.sent,i=s.data,console.log(i),t.users[t.form.index]=t.form,t.reset(),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](2),e.t0.response?t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message}):t.$swal({icon:"error",title:"錯誤",text:"gg"});case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))()}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/users/all",{headers:{authorization:"Bearer "+t.user.token}});case 3:r=e.sent,a=r.data,t.users=a.result,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得資料失敗"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}),o=n,c=(r("ca6a"),r("2877")),l=Object(c["a"])(o,a,s,!1,null,"1c1378c2",null);e["default"]=l.exports},f3cb:function(t,e,r){}}]);
//# sourceMappingURL=dashboard.e670d74c.js.map